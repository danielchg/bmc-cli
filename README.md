# iLO CLI Tool

> **NOTE**
> 
> All the code hold in this repos have been generated by AI using Cursor IDE. This is just an experiment on how to create a project using an AI based IDE.
>

A command-line tool for managing HP iLO (Integrated Lights-Out) Baseboard Management Controllers. This tool provides functionality to power on/off servers, mount virtual media, and manage server configurations through the iLO Redfish API.

## Features

- **Power Management**: Power on, power off, and check server power status
- **Virtual Media**: Mount and unmount ISO images as virtual media
- **Configuration**: Flexible configuration via YAML files or environment variables
- **Secure**: Supports HTTPS with self-signed certificate handling
- **Verbose Logging**: Optional verbose output for debugging

## Installation

### Prerequisites

- Go 1.19 or later

### Build from Source

```bash
git clone <repository-url>
cd ilo-cli
go build -o ilo-cli
```

## Configuration

The tool supports configuration through both YAML files and environment variables.

### Environment Variables

```bash
export ILO_HOST="192.168.1.100"
export ILO_USERNAME="admin"
export ILO_PASSWORD="password"
export ILO_PORT="443"
export ILO_USE_HTTPS="true"
```

### YAML Configuration File

Create a `config.yaml` file:

```yaml
ilo:
  host: "192.168.1.100"
  username: "admin"
  password: "password"
  port: 443
  use_https: true
```

Generate a sample configuration file:

```bash
./ilo-cli config generate
```

## Usage

### Power Management

```bash
# Check server power status
./ilo-cli power status

# Power on the server
./ilo-cli power on

# Power off the server (force)
./ilo-cli power off
```

### Virtual Media Management

```bash
# List virtual media slots and status
./ilo-cli virtualmedia list
./ilo-cli vm list  # Short alias

# Mount an ISO image
./ilo-cli virtualmedia mount http://192.168.1.100/images/ubuntu-20.04.iso
./ilo-cli vm mount http://192.168.1.100/images/ubuntu-20.04.iso

# Unmount all virtual media
./ilo-cli virtualmedia unmount
./ilo-cli vm unmount
```

### Configuration Management

```bash
# Generate sample configuration file
./ilo-cli config generate

# Show current configuration (passwords hidden)
./ilo-cli config show
```

### Global Options

```bash
# Use custom configuration file
./ilo-cli --config /path/to/config.yaml power status

# Enable verbose output
./ilo-cli --verbose power on
./ilo-cli -v vm mount http://example.com/image.iso
```

## Examples

### Complete Workflow Example

```bash
# 1. Generate configuration file
./ilo-cli config generate

# 2. Edit config.yaml with your iLO credentials
vim config.yaml

# 3. Check server status
./ilo-cli power status

# 4. Mount installation media
./ilo-cli vm mount http://192.168.1.100/images/ubuntu-20.04.iso

# 5. Power on server
./ilo-cli power on

# 6. After installation, unmount media
./ilo-cli vm unmount

# 7. Power off server
./ilo-cli power off
```

### Using Environment Variables

```bash
# Set environment variables
export ILO_HOST="192.168.1.100"
export ILO_USERNAME="admin"
export ILO_PASSWORD="secretpassword"

# Use the tool without a config file
./ilo-cli power status
```

## API Compatibility

This tool uses the Redfish API standard and has been tested with:

- HP iLO 4
- HP iLO 5
- HPE iLO 6

## Security Considerations

- The tool accepts self-signed certificates by default for iLO compatibility
- Passwords in configuration files should be protected with appropriate file permissions
- Consider using environment variables for passwords in automated environments

## Troubleshooting

### Common Issues

1. **Connection Refused**
   - Verify the iLO IP address and port
   - Check network connectivity
   - Ensure iLO web interface is accessible

2. **Authentication Failed**
   - Verify username and password
   - Check if the account has sufficient privileges
   - Ensure the account is not locked

3. **SSL/TLS Errors**
   - The tool accepts self-signed certificates by default
   - If issues persist, try using HTTP instead of HTTPS (not recommended for production)

### Verbose Output

Use the `--verbose` or `-v` flag for detailed logging:

```bash
./ilo-cli -v power status
```

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Support

For issues and questions, please open an issue in the project repository. 